<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PDF Merger & Splitter — JALWA Tools</title>  <style>
    :root{
      --blue:#007BFF; /* bright blue theme */
      --bg:#ffffff;
      --muted:#6b7280;
      --radius:12px;
      --glass: rgba(255,255,255,0.85);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      background:linear-gradient(180deg, #f7fbff 0%, #ffffff 100%);
      color:#0f172a;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
    }

    .container{
      width:100%;
      max-width:980px;
      background:var(--glass);
      border-radius:16px;
      box-shadow:0 8px 30px rgba(3,10,38,0.08);
      padding:20px;
      backdrop-filter: blur(6px);
    }

    header{
      display:flex;
      gap:16px;
      align-items:center;
      margin-bottom:12px;
    }
    .logo{
      width:56px;height:56px;border-radius:12px;background:var(--blue);display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:20px;flex:0 0 56px;
    }
    h1{font-size:20px;margin:0}
    p.lead{margin:0;color:var(--muted);font-size:13px}

    .grid{
      display:grid;
      grid-template-columns:1fr 360px;
      gap:16px;
      margin-top:16px;
    }

    @media (max-width:880px){
      .grid{grid-template-columns:1fr}
    }

    .card{
      background:white;border-radius:12px;padding:16px;box-shadow:0 6px 18px rgba(3,10,38,0.04);
    }

    .controls{display:flex;flex-direction:column;gap:12px}
    label{font-size:13px;color:var(--muted)}

    input[type=file]{display:block}

    .btn{
      display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;border:0;background:var(--blue);color:white;font-weight:600;cursor:pointer;
    }
    .btn.ghost{background:transparent;color:var(--blue);border:1px solid rgba(0,123,255,0.12)}
    .btn.warn{background:#ff6b6b}

    .small{font-size:13px;color:var(--muted)}
    .row{display:flex;gap:10px;align-items:center}

    textarea.range{width:100%;min-height:44px;padding:8px;border-radius:8px;border:1px solid #e6eefb}

    .result{margin-top:12px}

    .file-list{list-style:none;padding:0;margin:8px 0 0 0;display:flex;flex-direction:column;gap:8px}
    .file-list li{display:flex;justify-content:space-between;align-items:center;padding:8px;border-radius:8px;border:1px dashed #e6eefb}

    .muted{color:var(--muted);font-size:13px}

    footer{margin-top:16px;display:flex;justify-content:space-between;align-items:center}

    .note{font-size:12px;color:var(--muted)}

    /* responsive tweaks */
    @media (max-width:420px){
      .logo{width:48px;height:48px;font-size:18px}
      h1{font-size:18px}
    }
  </style></head>
<body>
  <div class="container">
    <header>
      <div class="logo">J</div>
      <div>
        <h1>PDF Merger & Splitter</h1>
        <p class="lead">Merge multiple PDFs or split a PDF into individual pages / custom ranges. Fully client-side — files never leave the browser.</p>
      </div>
    </header><div class="grid">
  <section class="card">
    <h3 style="margin:0 0 8px 0">Merge PDFs</h3>
    <div class="controls">
      <label class="small">Select PDF files to merge (order matters):</label>
      <input id="mergeFiles" type="file" accept="application/pdf" multiple />
      <div class="row">
        <button class="btn" id="mergeBtn">Merge & Download</button>
        <button class="btn ghost" id="clearMerge">Clear</button>
      </div>
      <div class="result" id="mergeResult"></div>
      <ul id="mergeList" class="file-list"></ul>
    </div>
  </section>

  <aside class="card">
    <h3 style="margin:0 0 8px 0">Split PDFs</h3>
    <div class="controls">
      <label class="small">Upload a single PDF to split:</label>
      <input id="splitFile" type="file" accept="application/pdf" />

      <div style="display:flex;gap:8px;align-items:center">
        <input type="radio" id="splitIndividual" name="splitMode" checked />
        <label for="splitIndividual" class="small">Split into individual pages (download as ZIP)</label>
      </div>
      <div style="display:flex;gap:8px;align-items:center">
        <input type="radio" id="splitRange" name="splitMode" />
        <label for="splitRange" class="small">Split by page range</label>
      </div>

      <label class="small">If using range — specify pages or ranges (e.g. <code>1-3,5,7-9</code>):</label>
      <textarea id="pageRange" class="range" placeholder="e.g. 1-3,5,7-9"></textarea>

      <div class="row">
        <button class="btn" id="splitBtn">Split & Download</button>
        <button class="btn ghost" id="clearSplit">Clear</button>
      </div>

      <div id="splitInfo" class="muted" style="margin-top:8px">No file selected.</div>
    </div>
  </aside>

</div>

<footer>
  <div class="note">Client-side only — uses <strong>pdf-lib</strong> and <strong>JSZip</strong>. Files are processed inside your browser.</div>
  <div style="font-size:13px;color:var(--muted)">Designed for mobile & desktop</div>
</footer>

  </div>  <!-- Libraries (CDN) -->  <script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.0/jszip.min.js" integrity="sha512-+qR0rX3oVJYgV6a6q2tQKQn3q0Y6cqkqW8tqI6t2kq+vJY7dZ0u1k1nX0Qm2k3Zp5r3q7q9Y6u5p6q7r8s9t0g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>  <script>
    const { PDFDocument } = PDFLib;

    // Merge functionality
    const mergeInput = document.getElementById('mergeFiles');
    const mergeBtn = document.getElementById('mergeBtn');
    const mergeList = document.getElementById('mergeList');
    const mergeResult = document.getElementById('mergeResult');
    const clearMerge = document.getElementById('clearMerge');

    let mergeFilesArr = [];

    mergeInput.addEventListener('change', (e)=>{
      mergeFilesArr = Array.from(e.target.files).filter(f=>f.type === 'application/pdf');
      renderMergeList();
    });

    clearMerge.addEventListener('click', ()=>{
      mergeFilesArr = []; mergeInput.value = ''; renderMergeList(); mergeResult.innerHTML='';
    });

    function renderMergeList(){
      mergeList.innerHTML='';
      if(mergeFilesArr.length===0){ mergeList.innerHTML='<li class="muted">No PDF files selected.</li>'; return; }
      mergeFilesArr.forEach((f,i)=>{
        const li = document.createElement('li');
        li.innerHTML = `<div>${i+1}. ${escapeHtml(f.name)}</div><div><button class=\"btn ghost\" data-i=\"${i}\">Remove</button></div>`;
        mergeList.appendChild(li);
      });
      // add remove handlers
      mergeList.querySelectorAll('button').forEach(btn=>btn.addEventListener('click', (ev)=>{
        const idx = Number(ev.currentTarget.dataset.i);
        mergeFilesArr.splice(idx,1); renderMergeList();
      }));
    }

    mergeBtn.addEventListener('click', async ()=>{
      if(mergeFilesArr.length < 1){ alert('Please select at least one PDF file to merge.'); return; }
      mergeBtn.disabled = true; mergeBtn.textContent = 'Merging...';
      try{
        const mergedPdf = await PDFDocument.create();
        for(const f of mergeFilesArr){
          const arrayBuffer = await f.arrayBuffer();
          const pdf = await PDFDocument.load(arrayBuffer);
          const copied = await mergedPdf.copyPages(pdf, pdf.getPageIndices());
          copied.forEach((p)=> mergedPdf.addPage(p));
        }
        const mergedBytes = await mergedPdf.save();
        downloadBlob(mergedBytes, 'merged.pdf');
        mergeResult.innerHTML = `<div class="small">Merged ${mergeFilesArr.length} PDF(s) — <strong>merged.pdf</strong> downloaded.</div>`;
      }catch(err){
        console.error(err); alert('Error while merging PDFs: ' + err.message);
      }finally{
        mergeBtn.disabled = false; mergeBtn.textContent = 'Merge & Download';
      }
    });

    // Split functionality
    const splitInput = document.getElementById('splitFile');
    const splitBtn = document.getElementById('splitBtn');
    const splitInfo = document.getElementById('splitInfo');
    const clearSplitBtn = document.getElementById('clearSplit');

    let splitFile = null;

    splitInput.addEventListener('change', (e)=>{
      const f = e.target.files[0];
      if(!f) return;
      if(f.type !== 'application/pdf'){ alert('Please upload a PDF file.'); splitInput.value = ''; return; }
      splitFile = f; splitInfo.textContent = `Selected: ${f.name} (${Math.round(f.size/1024)} KB)`;
    });

    clearSplitBtn.addEventListener('click', ()=>{ splitFile=null; splitInput.value=''; splitInfo.textContent='No file selected.'; document.getElementById('pageRange').value=''; });

    splitBtn.addEventListener('click', async ()=>{
      if(!splitFile){ alert('Please select a PDF to split.'); return; }
      const mode = document.getElementById('splitIndividual').checked ? 'individual' : 'range';
      splitBtn.disabled = true; splitBtn.textContent = 'Processing...';
      try{
        const arrayBuffer = await splitFile.arrayBuffer();
        const srcPdf = await PDFDocument.load(arrayBuffer);
        const total = srcPdf.getPageCount();

        if(mode === 'individual'){
          // create individual pages and zip them
          const zip = new JSZip();
          for(let i=0;i<total;i++){
            const outDoc = await PDFDocument.create();
            const [copied] = await outDoc.copyPages(srcPdf, [i]);
            outDoc.addPage(copied);
            const bytes = await outDoc.save();
            zip.file(`${getBaseName(splitFile.name)}-page-${i+1}.pdf`, bytes);
          }
          const content = await zip.generateAsync({type:'blob'});
          downloadBlob(await content.arrayBuffer(), `${getBaseName(splitFile.name)}-pages.zip`);
          splitInfo.textContent = `Split into ${total} files and downloaded as ZIP.`;

        } else {
          const rangeText = document.getElementById('pageRange').value.trim();
          if(!rangeText){ alert('Please enter page numbers or ranges, e.g. 1-3,5,7-9'); splitBtn.disabled=false; splitBtn.textContent='Split & Download'; return; }
          const ranges = parseRanges(rangeText);
          if(!ranges || ranges.length===0){ alert('Invalid range format. Use examples like: 1-3,5,7-9'); splitBtn.disabled=false; splitBtn.textContent='Split & Download'; return; }

          // We'll create one PDF containing all requested pages in the order provided
          const out = await PDFDocument.create();
          let count = 0;
          for(const r of ranges){
            for(let p=r.from; p<=r.to; p++){
              if(p < 1 || p > total) continue; // skip invalid pages
              const [copied] = await out.copyPages(srcPdf, [p-1]);
              out.addPage(copied);
              count++;
            }
          }
          if(count===0){ alert('No valid pages were selected in the provided ranges.'); splitBtn.disabled=false; splitBtn.textContent='Split & Download'; return; }
          const outBytes = await out.save();
          downloadBlob(outBytes, `${getBaseName(splitFile.name)}-split.pdf`);
          splitInfo.textContent = `Created PDF with ${count} page(s) from the requested ranges.`;
        }

      }catch(err){ console.error(err); alert('Error while splitting PDF: ' + err.message); }
      finally{ splitBtn.disabled = false; splitBtn.textContent = 'Split & Download'; }
    });

    // Helpers
    function downloadBlob(uint8ArrayOrBuffer, filename){
      const blob = new Blob([uint8ArrayOrBuffer], {type: 'application/pdf'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = filename; document.body.appendChild(a); a.click(); a.remove();
      setTimeout(()=>URL.revokeObjectURL(url), 1000);
    }

    function getBaseName(name){ return name.replace(/\.pdf$/i,'').replace(/[^a-z0-9-_]/ig,'_'); }

    function escapeHtml(text){ return text.replace(/[&"'<>]/g, function(m){ return ({'&':'&amp;','"':'&quot;','\'':'&#39;','<':'&lt;','>':'&gt;'}[m]); }); }

    // Parse ranges like "1-3,5,7-9"
    function parseRanges(text){
      try{
        const parts = text.split(',').map(s=>s.trim()).filter(Boolean);
        const out = [];
        for(const p of parts){
          if(/^\d+$/.test(p)){ const n=Number(p); out.push({from:n,to:n}); continue; }
          const m = p.match(/^(\d+)-(\d+)$/);
          if(m){ const a=Number(m[1]), b=Number(m[2]); if(a<=b) out.push({from:a,to:b}); else out.push({from:b,to:a}); continue; }
          // invalid part -> ignore
        }
        return out;
      }catch(e){return null}
    }

    // small polyfill for File names in older browsers

    // Accessibility: keyboard support for merge list ordering (not implemented — could be extended)

    // Prevent accidental form submission
    window.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' && (document.activeElement && document.activeElement.tagName === 'TEXTAREA')) e.stopPropagation(); });

  </script></body>
</html>
